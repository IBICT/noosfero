<script>
jQuery( document ).ready(function( $ ) {
  function toggle_checkbox_selectors(el) {
    if( el.is(':checked')) {
      $(el.data('selector')).show('fast');
    } else {
      $(el.data('selector')).hide('fast');
    }
  }
  $(".toggle_checkbox").click(function() {
    toggle_checkbox_selectors($(this));
  });
  $(".toggle_checkbox").each(function() {
    toggle_checkbox_selectors($(this));
  });
});
</script>

<div id='serpro-integration'>
  <h2><%= _('Serpro Integration') %></h2>

  <%= render :partial => 'gitlab' %>

  <div id="sonar">
  <h3>
    <%= labelled_check_box('', 'profile_data[allow_sonar_integration]', true, profile.allow_sonar_integration, {:class => "toggle_checkbox", 'data-selector' => 'ul.sonar'}) %>
    <%= _('Sonar Integration') %>
  </h3>
  <ul class='sonar'>
    <li>
      <%= labelled_text_field(_('Server Host'), 'profile_data[sonar]host]', profile.sonar[:host]) %>
    </li>
    <li>
      <%= labelled_text_field(_('Project: '), 'profile_data[sonar][project]', profile.sonar[:project]) %>
    </li>
  </ul>
  </div>

  <div id="jenkins">
  <h3>
    <%= labelled_check_box('', 'profile_data[allow_jenkins_integration]', true, profile.allow_jenkins_integration, {:class => "toggle_checkbox", 'data-selector' => 'ul.jenkins'}) %>
    <%= _('Jenkins Integration') %>
  </h3>
  <ul class='jenkins'>
    <li>
      <%= labelled_text_field(_('Server Host'), 'profile_data[jenkins][host]', profile.jenkins[:host]) %>
    </li>
    <li>
      <%= labelled_text_field(_('Server Port'), 'profile_data[jenkins][port]', profile.jenkins[:port]) %>
    </li>
    <li>
      <%= labelled_text_field(_('Server Context Name'), 'profile_data[jenkins][context_name]', profile.jenkins[:context_name]) %>
    </li>
    <li>
      <%= labelled_text_field(_('Server User'), 'profile_data[jenkins][user]', profile.jenkins[:user]) %>
    </li>
    <li>
      <%= labelled_text_field(_('Server Private Token'), 'profile_data[jenkins][private_token]', profile.jenkins[:private_token]) %>
    </li>
    <li>
      <%= labelled_text_field(_('Server Url'), 'profile_data[jenkins][url]', profile.jenkins[:url], {:disabled => true}) %>
    </li>
  </ul>
  </div>
</div>
