<% extend SiteTourPlugin::SiteTourHelper %>
<% js_file = defined?(:js_file) ? js_file : nil %>
<%= javascript_include_tag(js_file) if js_file.present? %>

<% if actions.present? %>
<script>
  jQuery( document ).ready(function( $ ) {
    <% actions.group_by {|h| h[:group_name]}.each do |group, group_actions| %>
      <% group_actions.each_with_index do |action, index| %>
        <%= "siteTourPlugin.add('#{j action[:group_name]}', '#{j action[:selector]}', '#{j parse_tour_description(action[:description])}', #{index + 1});" %>
      <% end %>
    <% end %>

    <% (group_triggers||[]).each_with_index do |group, index| %>
      <%= "siteTourPlugin.addGroupTrigger('#{j group[:group_name]}', '#{j group[:selector]}', '#{j group[:event]}');" %>
    <% end %>
  });
</script>
<% end %>
